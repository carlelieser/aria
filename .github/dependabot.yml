version: 2
updates:
    # npm dependencies
    - package-ecosystem: 'npm'
      directory: '/'
      schedule:
          interval: 'weekly'
          day: 'monday'
      open-pull-requests-limit: 10
      commit-message:
          prefix: 'chore(deps):'
      labels:
          - 'dependencies'
          - 'chore'
      groups:
          # Expo SDK packages - should be updated together
          expo:
              patterns:
                  - 'expo'
                  - 'expo-*'
                  - '@expo/*'
              update-types:
                  - 'minor'
                  - 'patch'

          # React and React Native core - update together for compatibility
          react-native:
              patterns:
                  - 'react'
                  - 'react-dom'
                  - 'react-native'
                  - 'react-native-web'
                  - '@types/react'
                  - '@types/react-native'

          # React Native community packages
          react-native-community:
              patterns:
                  - '@react-native-community/*'
                  - '@react-native-async-storage/*'
                  - '@react-native-cookies/*'
              update-types:
                  - 'minor'
                  - 'patch'

          # Navigation packages - should be updated together
          navigation:
              patterns:
                  - '@react-navigation/*'
                  - 'expo-router'
              update-types:
                  - 'minor'
                  - 'patch'

          # UI and gesture packages
          ui-packages:
              patterns:
                  - 'react-native-gesture-handler'
                  - 'react-native-reanimated'
                  - 'react-native-screens'
                  - 'react-native-safe-area-context'
                  - 'react-native-svg'
                  - 'react-native-paper'
                  - '@gorhom/*'
                  - '@shopify/*'
                  - 'lucide-react-native'
              update-types:
                  - 'minor'
                  - 'patch'

          # Development dependencies
          dev-dependencies:
              dependency-type: 'development'
              update-types:
                  - 'minor'
                  - 'patch'

      # Ignore major version updates for packages that need manual review
      # These often have breaking changes that require code updates
      ignore:
          # Expo major versions require SDK upgrade process
          - dependency-name: 'expo'
            update-types: ['version-update:semver-major']
          - dependency-name: 'expo-*'
            update-types: ['version-update:semver-major']

          # React Native major versions need careful migration
          - dependency-name: 'react-native'
            update-types: ['version-update:semver-major']
          - dependency-name: 'react'
            update-types: ['version-update:semver-major']

          # Reanimated major versions often have breaking API changes
          - dependency-name: 'react-native-reanimated'
            update-types: ['version-update:semver-major']

          # Gesture handler major versions need migration
          - dependency-name: 'react-native-gesture-handler'
            update-types: ['version-update:semver-major']

    # GitHub Actions
    - package-ecosystem: 'github-actions'
      directory: '/'
      schedule:
          interval: 'weekly'
          day: 'monday'
      commit-message:
          prefix: 'ci(deps):'
      labels:
          - 'ci'
          - 'dependencies'
      groups:
          # Group all GitHub Actions updates together
          github-actions:
              patterns:
                  - '*'
